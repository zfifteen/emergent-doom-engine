package com.emergent.doom.export;\n\nimport static org.junit.jupiter.api.Assertions.*;\n\nimport com.emergent.doom.cell.Cell;\nimport com.emergent.doom.probe.Probe;\nimport com.emergent.doom.probe.StepSnapshot;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.io.TempDir;\n\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.List;\n\nclass TrajectoryDataExporterTest {\n\n    @Test\n    void testValidationChronologicalOrder() {\n        // Create mock snapshots with out-of-order timestamps\n        // (Mock implementation needed; assume Probe mock)\n        Probe<Cell<String>> probe = createOutOfOrderProbe();\n        assertThrows(IllegalArgumentException.class, () -> {\n            TrajectoryDataExporter.exportSnapshotsToJSON(\"/tmp/test.json\", probe);\n        });\n    }\n\n    @Test\n    void testValidationInconsistentSize() {\n        // Create mock with inconsistent sizes\n        Probe<Cell<String>> probe = createInconsistentSizeProbe();\n        assertThrows(IllegalArgumentException.class, () -> {\n            TrajectoryDataExporter.exportSnapshotsToCSV(\"/tmp/test.csv\", probe);\n        });\n    }\n\n    // Mock factory methods (simplified; use Mockito in real test)\n    private Probe<Cell<String>> createOutOfOrderProbe() {\n        // Return mock Probe with non-chronological snapshots\n        return null; // Placeholder\n    }\n\n    private Probe<Cell<String>> createInconsistentSizeProbe() {\n        // Return mock with different array sizes\n        return null; // Placeholder\n    }\n\n    @Test\n    void testJsonNumericSerialization(@TempDir Path tempDir) throws IOException {\n        Path file = tempDir.resolve(\"test.json\");\n        // Mock Probe with numeric cells (e.g., toString() = \"5\")\n        Probe<Cell<String>> probe = createNumericProbe();\n        TrajectoryDataExporter.exportSnapshotsToJSON(file.toString(), probe);\n        // Assert file content has unquoted numbers\n        String content = Files.readString(file);\n        assertTrue(content.contains(\"[5,2,8]\")); // Unquoted\n        assertFalse(content.contains(\"\\\"5\\\"\")); // No quoted numbers\n    }\n\n    private Probe<Cell<String>> createNumericProbe() {\n        // Placeholder mock\n        return null;\n    }\n}